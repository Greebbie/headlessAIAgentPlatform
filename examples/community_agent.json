{
  "description": "示例: 社区管理智能体配置",
  "agent": {
    "name": "社区服务助手",
    "description": "XX社区智能客服，可查询信息、办理业务、解答常见问题",
    "system_prompt": "你是XX社区的智能服务助手。你的职责是帮助社区居民查询信息、办理各类社区业务。请始终保持礼貌专业，用简洁的语言回答问题。",
    "llm_model": "qwen2.5",
    "response_config": {
      "default_mode": "short",
      "enable_citations": true,
      "enable_followups": true,
      "max_short_tokens": 120,
      "no_citation_policy": "refuse"
    },
    "risk_config": {
      "forbidden_keywords": ["政治敏感", "暴力"],
      "max_risk_level": "warning",
      "auto_escalate_on": ["投诉", "紧急"]
    }
  },
  "workflow": {
    "name": "居住证办理",
    "description": "社区居住证申请流程",
    "steps": [
      {
        "name": "收集基本信息",
        "order": 0,
        "step_type": "collect",
        "prompt_template": "请提供以下信息以办理居住证：",
        "fields": [
          {"name": "real_name", "label": "姓名", "field_type": "text", "required": true},
          {"name": "id_card", "label": "身份证号", "field_type": "id_card", "required": true},
          {"name": "phone", "label": "联系电话", "field_type": "phone", "required": true},
          {"name": "address", "label": "现居住地址", "field_type": "address", "required": true}
        ]
      },
      {
        "name": "信息校验",
        "order": 1,
        "step_type": "validate",
        "validation_rules": {
          "id_card": {"required": true, "regex": "^\\d{17}[\\dXx]$"},
          "phone": {"required": true, "regex": "^1[3-9]\\d{9}$"}
        },
        "on_failure": "rollback"
      },
      {
        "name": "身份核验",
        "order": 2,
        "step_type": "tool_call",
        "tool_id": "IDENTITY_VERIFY_TOOL_ID",
        "tool_config": {
          "input_mapping": {"name": "real_name", "id_number": "id_card"},
          "output_mapping": {"verify_result": "verify_status"}
        },
        "on_failure": "escalate"
      },
      {
        "name": "信息确认",
        "order": 3,
        "step_type": "confirm",
        "prompt_template": "请确认以下信息：\n姓名: {real_name}\n身份证: {id_card}\n电话: {phone}\n地址: {address}\n\n确认无误请回复\"确认\"",
        "requires_human_confirm": false
      },
      {
        "name": "提交申请",
        "order": 4,
        "step_type": "tool_call",
        "tool_id": "SUBMIT_APPLICATION_TOOL_ID",
        "on_failure": "retry",
        "max_retries": 3
      },
      {
        "name": "完成",
        "order": 5,
        "step_type": "complete",
        "prompt_template": "您的居住证申请已成功提交！\n申请编号: {application_id}\n预计处理时间: 5-7个工作日\n您可以随时查询办理进度。"
      }
    ]
  },
  "knowledge_sources": [
    {
      "name": "社区服务FAQ",
      "source_type": "faq",
      "domain": "community",
      "entries": [
        {"question": "居住证需要什么材料？", "answer": "需要：1)身份证原件 2)近期1寸照片2张 3)居住证明(租房合同或房产证) 4)工作证明或社保缴纳记录"},
        {"question": "居住证办理时间？", "answer": "工作日 9:00-17:00，周末不办理"},
        {"question": "居住证多久能拿到？", "answer": "一般5-7个工作日，急件可加急3个工作日"}
      ]
    },
    {
      "name": "社区联系方式",
      "source_type": "kv_entity",
      "domain": "community",
      "entries": [
        {"key": "社区服务中心电话", "value": "0571-88888888"},
        {"key": "社区服务中心地址", "value": "XX路100号XX社区服务中心1楼"},
        {"key": "工作时间", "value": "周一至周五 9:00-17:00"},
        {"key": "紧急联系电话", "value": "110 / 120 / 119"}
      ]
    }
  ],
  "tools": [
    {
      "name": "身份核验",
      "category": "api",
      "endpoint": "https://internal-api.example.com/verify-identity",
      "method": "POST",
      "input_schema": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "id_number": {"type": "string"}
        },
        "required": ["name", "id_number"]
      },
      "timeout_ms": 10000,
      "risk_level": "warning"
    },
    {
      "name": "提交居住证申请",
      "category": "api",
      "endpoint": "https://internal-api.example.com/submit-residence-permit",
      "method": "POST",
      "timeout_ms": 15000,
      "risk_level": "info"
    }
  ]
}
